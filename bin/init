#!/usr/bin/env python

#   This file is part of wald:meta
#   Copyright (C) 2014  Kuno Woudt <kuno@frob.nl>
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of copyleft-next 0.3.0.  See LICENSE.txt.

from __future__ import absolute_import
from __future__ import print_function
from __future__ import unicode_literals

import os
import sys
import activate
from os.path import abspath, dirname

activate.uninstalled ()
activate.virtualenv ('waldmeta')

import wald.storage.setup
import wald.storage.mint

if __name__ == '__main__':
    if len(sys.argv) < 3:
        print ("Usage: bin/init <base url> <dataset>")
        print ("")
        print ("See README.md for more information.")
        print ("")
        sys.exit (1)

    project_root = dirname(dirname(abspath(__file__)))
    base_url = sys.argv[1]
    datasets = sys.argv[2]

    graphs = wald.storage.setup.initialize(project_root, base_url, datasets)
    wald.storage.mint.initialize(graphs['meta'].setup)

